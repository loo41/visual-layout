(this["webpackJsonpvisual-layout"]=this["webpackJsonpvisual-layout"]||[]).push([[0],{108:function(e,t,n){e.exports={drawer:"Drawer_drawer__3rWUi",input:"Drawer_input__1lviU"}},115:function(e,t,n){e.exports={container:"History_container__36sYF",history:"History_history__2s0vS",futureHistory:"History_futureHistory__2IKGd"}},122:function(e,t,n){e.exports={inputNumbers:"Header_inputNumbers__2tKEr",close:"Header_close__3--jI"}},123:function(e,t,n){e.exports={container:"Layout_container__2vp30",layoutWarper:"Layout_layoutWarper__tUQLq"}},139:function(e,t,n){e.exports={header:"Header_header__1foMC"}},223:function(e,t,n){},224:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),a=n(24),c=n.n(a),o=n(236),s=n(30),l={type:"div",styles:[{key:"height",value:"854px"},{key:"width",value:"480px"}],children:[]},u=[{height:"926",width:"428",key:"iPhone 12 Pro Max"},{height:"844",width:"390",key:"iPhone 12 Pro"},{height:"896",width:"414",key:"iPhone 11"},{height:"640",width:"360",key:"Nexus 5"},{height:"800",width:"360",key:"Samsung Galaxy A70"},{height:"780",width:"360",key:"Oppo Find X"},{height:"1366",width:"1024",key:"iPadOS"},{height:"1024",width:"768",key:"\u5c0f\u7c73\u5e73\u677f"},{height:"800",width:"1280",key:"MacBook"}],d=n(53),h=n.n(d),v=function(e){return e>9?e:"0".concat(e)},f=n(23),p=n(43),y=n(48),j=n(64),b=n(61),g=function e(){Object(f.a)(this,e),this.pages={},this.idx=1,this.currentId=void 0},O=n(46),m=n(25),x=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(f.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).keep=function(t){var n,i=Object(m.a)({id:(new Date).getMilliseconds(),time:new Date},t);(null===i||void 0===i?void 0:i.node.toString())!==(null===(n=e.history[e.history.length-1])||void 0===n?void 0:n.node.toString())&&(e.history.push(i),e.future=[])},e.return=function(t){var n,i=e.history.findIndex((function(e){return e.id===t}));-1!==i&&((n=e.future).push.apply(n,Object(O.a)(e.history.slice(i))),e.history=e.history.slice(0,i))},e.recovery=function(t){var n,i=e.future.findIndex((function(e){return e.id===t}));-1!==i&&((n=e.history).push.apply(n,Object(O.a)(e.future.slice(i))),e.future=e.future.slice(0,i))},e.backOff=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t>0;){var n=e.history.pop();n&&e.future.push(n),t--}},e.forward=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t>0;){var n=e.future.pop();n&&e.history.push(n),t--}},e.current=function(){return e.history[e.history.length-1]},e}return n}(function(){function e(){Object(f.a)(this,e),this._history=[],this._future=[]}return Object(p.a)(e,[{key:"history",get:function(){return this._history},set:function(e){for(this._history=e;this.history.length>100;)this._history.shift()}},{key:"future",get:function(){return this._future},set:function(e){for(this._future=e;this._future.length>100;)this._future.shift()}}]),e}()),k=function(){function e(t,n){var i=this;Object(f.a)(this,e),this.id=void 0,this.name=void 0,this._page=void 0,this.currentNode=[],this.history=new x,this.target=void 0,this.clearDeleteNode=function(e){return e.isDelete?(e.isRoot&&(e.children=[]),null):(e.children=e.children.map((function(e){return i.clearDeleteNode(e)})).filter((function(e){return e})),e)},this.name=this.id=t,this.target=n}return Object(p.a)(e,[{key:"setPage",value:function(e){this._page=e}},{key:"page",get:function(){return this.clearDeleteNode(this._page),this._page},set:function(e){this._page=e,this.clearDeleteNode(this._page)}}]),e}(),C=function(){function e(t){Object(f.a)(this,e),this.type=void 0,this._styles=void 0,this.children=void 0,this.element=void 0,this.isDelete=!1,this.isSelect=!1,this.isRoot=!1,this.id=void 0;var n=t.type,i=t.styles,r=t.children,a=t.element,c=t.isRoot,o=void 0!==c&&c;this.type=n,this._styles=i,this.children=r,this.element=a,this.isRoot=o,this.id=e.Random()}return Object(p.a)(e,[{key:"styles",get:function(){return this._styles=h.a.uniqBy(this._styles,"key"),this._styles},set:function(e){this._styles=e}}],[{key:"Random",value:function(){return e.random++}}]),e}();C.random=1;var S=C,A=function e(){var t=this;Object(f.a)(this,e),this.create=function(e){var n=e.type,i=e.children,r=document.createElement(n);return e.innerHTML(r),t.renderStyles(r,e),null===i||void 0===i||i.forEach((function(e){return r.appendChild(t.create(e))})),r},this.renderStyles=function(e,t){var n,i,r=t.styles,a=t.isSelect;(null===r||void 0===r?void 0:r.length)&&(e.style.cssText=((null===(n=t.pageService)||void 0===n?void 0:n.options.previewStyle)||[]).concat(a&&(null===(i=t.pageService)||void 0===i?void 0:i.options.selectStyle)||[]).concat(r).map((function(e){var t=e.key,n=e.value;return"".concat(t,": ").concat(n)})).join(";"))}},_="application/layout",w=[{key:"border",value:"1px solid #1890ff"}],N=[{key:"border",value:"1px dashed #000000",title:"\u865a\u7ebf\u8fb9\u6846"},{key:"padding",value:"5px",title:"\u5916\u8fb9\u8ddd"},{key:"background",value:"white",title:"\u767d\u8272\u80cc\u666f"}],E=function e(){var t=this;Object(f.a)(this,e),this.bindContainerEvent=function(n){n.element&&(n.element.ondrop=function(t){var i;t.preventDefault(),t.stopPropagation();var r=null===(i=t.dataTransfer)||void 0===i?void 0:i.getData(_);if(r){var a,c,o,s=Reflect.get(e.dragData,r);if(s)Reflect.deleteProperty(e.dragData,r),(c=n.styles).push.apply(c,Object(O.a)(s.styles)),(o=n.children).push.apply(o,Object(O.a)(s.children));null===(a=n.pageService)||void 0===a||a.update({description:"\u6dfb\u52a0\u5143\u7d20"})}},n.element.ondragover=function(e){var t;e.preventDefault(),(null===(t=e.dataTransfer)||void 0===t?void 0:t.dropEffect)&&(e.dataTransfer.dropEffect="move")},n.element.onclick=function(e){var t;e.stopPropagation(),null===(t=n.pageService)||void 0===t||t.setCurrentNode([n])}),n.children.forEach((function(e){return t.bindContainerEvent(e)}))},this.bindLayoutEvent=function(t){if(t.element){var n="drag".concat(Math.random());t.element.id=n,t.element.draggable=!0,t.element.ondragstart=function(i){var r,a;Reflect.set(e.dragData,n,t.copy()),null===(r=i.dataTransfer)||void 0===r||r.setData(_,n),(null===(a=i.dataTransfer)||void 0===a?void 0:a.dropEffect)&&(i.dataTransfer.dropEffect="move")}}}};E.dragData={};var P=E,D=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var i;return Object(f.a)(this,n),(i=t.call(this,e.id,e.page)).update=void 0,i.Doc=void 0,i.DocEvent=void 0,i.options=void 0,i.updateSign=!1,i.createNode=function(e,t){return new B(Object(m.a)(Object(m.a)({},e),{},{isRoot:t,children:e.children.map((function(e){return i.createNode(e)}))}),Object(y.a)(i))},i.bindUpdate=function(e){return function(t){var n=t.description,r=t.isKeepHistory;(void 0===r||r)&&i.history.keep({node:i.page.copy(),description:n}),i.updateSign=!i.updateSign,e()}},i.setCurrentNode=function(e){i.page.clearEffect(),i.currentNode=e.map((function(e){return e.isSelect=!0,e})),i.update({isKeepHistory:!1})},i.proxy=function(e){var t=function(){return{get:function(e,t,i){var r=Reflect.get(e,t,i);return Array.isArray(r)||function(e){return"[object Object]"===Object.prototype.toString.call(e)}(r)?n(r):r},set:function(e,t,n,i){return Reflect.set(e,t,n,i)}}},n=function(e){return new Proxy(e,t())};return n(e)},i.setStyles=function(e){i.currentNode.map((function(t){return t.setStyles(e)})),i.update({description:"\u66f4\u65b0\u6837\u5f0f"})},i.createView=function(){var e=i.Doc.create(i.page);return i.DocEvent.bindContainerEvent(i.page),e},i.setHistoryPage=function(){var e=i.history.current();e&&(e.node.clearEffect(),i.page=e.node.copy())},i.options=e,i.id=e.id,i.name=e.name,i.update=i.bindUpdate(e.update),i.Doc=new A,i.DocEvent=new P,i.setPage(i.createNode(e.page,!0)),i}return Object(p.a)(n,[{key:"setOptions",value:function(e){this.options=Object(m.a)(Object(m.a)({},this.options),e),this.update({isKeepHistory:!1})}},{key:"toString",value:function(){return this.page.toString()}},{key:"backOffHistory",value:function(){this.history.backOff();var e=this.history.current();e?(e.node.clearEffect(),this.page=e.node.copy()):this.page=this.createNode(this.target,!0),this.update({isKeepHistory:!1})}},{key:"forwardHistory",value:function(){this.history.forward(),this.setHistoryPage(),this.update({isKeepHistory:!1})}},{key:"returnHistory",value:function(e){this.history.return(e);var t=this.history.current();t?(t.node.clearEffect(),this.page=t.node.copy()):this.page=this.createNode(this.target,!0),this.update({isKeepHistory:!1})}},{key:"recoveryHistory",value:function(e){this.history.recovery(e),this.setHistoryPage(),this.update({isKeepHistory:!1})}}]),n}(k),z=n(76),I=n.n(z),H=function e(t){var n=this;Object(f.a)(this,e),this.pagesService=t,this.copyNode=[],this.bindKeyboardEvent=function(){I.a.bind("ctrl + c",(function(){console.log("Copy"),n.copyNode=n.pagesService.getCurrentPage().currentNode})),I.a.bind("ctrl + v",(function(){console.log("Paste"),n.pagesService.getCurrentPage().currentNode.forEach((function(e){var t;(t=e.children).push.apply(t,Object(O.a)(n.copyNode.map((function(e){return e.copy()}))))})),n.pagesService.getCurrentPage().update({description:"\u590d\u5236\u5143\u7d20"})})),I.a.bind("ctrl + backspace",(function(e){console.log(e),console.log("Delete");var t=n.pagesService.getCurrentPage().currentNode;t.some((function(e){return e.isRoot}))||(t.forEach((function(e){e.isDelete=!0})),n.pagesService.getCurrentPage().update({description:"\u5220\u9664\u5143\u7d20"}))})),I.a.bind("ctrl + z",(function(){console.log("BackOff"),n.pagesService.getCurrentPage().backOffHistory()})),I.a.bind("ctrl + y",(function(){console.log("Forward"),n.pagesService.getCurrentPage().forwardHistory()}))},this.bindKeyboardEvent()},R=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.call(this)).updateView=function(){},e.update=function(){Promise.resolve().then((function(){return e.updateView()}))},e.getCurrentPage=function(){return Object.values(e.pages).filter((function(t){return t.id===e.currentId}))[0]},new H(Object(y.a)(e)),e}return Object(p.a)(n,[{key:"init",value:function(e){this.updateView=e}},{key:"getPages",value:function(){return this.pages}},{key:"setPages",value:function(e){this.currentId=e,this.update()}},{key:"cerate",value:function(e){var t="Page".concat(this.idx);Reflect.set(this.pages,t,new D({id:t,update:this.update,name:e.name||t,selectStyle:e.selectStyle||[],page:e.page,previewStyle:e.previewStyle||[]})),this.currentId=t,this.idx++,this.update()}},{key:"delete",value:function(e){if(e===this.currentId){var t=Object.keys(this.pages),n=t.findIndex((function(t){return t===e}));-1!==n&&(this.currentId=t[n>0?n-1:n+1])}Reflect.deleteProperty(this.pages,e),this.update()}}]),n}(g),B=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e,i){var r;return Object(f.a)(this,n),(r=t.call(this,e)).pageService=i,r.copy=function(e){var t=e||Object(y.a)(r),i=t.type,a=t.styles,c=t.children;return new n({type:i,styles:a,element:t.element,isRoot:t.isRoot,children:(null===c||void 0===c?void 0:c.map((function(e){return e.copy()})))||[]},r.pageService)},r.setStyles=function(e){r.styles=e},r.innerHTML=function(e){r.element=e},r.clearEffect=function(){r.isSelect=!1,r.children.forEach((function(e){return e.clearEffect()}))},r.toString=function(){var e=Object(y.a)(r),t=e.id,n=e.children;return"".concat(t,":").concat(n.map((function(e){return e.toString()})))},r}return n}(S);B.createNodeService=function(e){return new B(Object(m.a)(Object(m.a)({},e),{},{children:e.children.map((function(e){return B.createNodeService(e)}))}))};var F=n(6),T=new R,K=Object(i.createContext)({pagesService:T,refresh:!1}),M=function(e){var t=e.children,n=Object(i.useState)(!1),r=Object(s.a)(n,2),a=r[0],c=r[1];return T.init((function(){c(!a)})),Object(i.useEffect)((function(){var e;T.cerate({page:(e=l,h.a.cloneDeep(e)),selectStyle:w,previewStyle:N})}),[]),Object(F.jsx)(K.Provider,{value:{pagesService:T,refresh:a},children:t})},U=n(79),W=n.n(U),Y=function(e){var t=e.page,n=e.options,r=t.updateSign,a=Object(i.useCallback)((function(e){e&&(e.firstChild&&e.removeChild(e.firstChild),e.appendChild(t.createView()))}),[r,t.page,t.currentNode]),c={transform:"scale(".concat(n.zoom,",").concat(n.zoom,")")};return Object(F.jsx)("div",{className:W.a.container,style:c,children:Object(F.jsx)("div",{className:W.a.canvas,ref:a})})},V=function(e){var t=e.pagesService,n=e.options,i=t.getCurrentPage();return Object(F.jsx)("div",{className:W.a.body,children:i&&Object(F.jsx)(Y,{page:i,options:n})})},Z=n(31),X=n.n(Z),L=n(229),J=n(44),q=n(242),G=n(240),Q=n(241),$=n(74),ee=n(232),te=n(146),ne=n(227),ie=n(238),re=n(228),ae=function(e){var t=e.pagesService.getCurrentPage(),n=null===t||void 0===t?void 0:t.options;return Object(F.jsx)(ne.a,{content:Object(F.jsx)(ie.a.Group,{value:null===n||void 0===n?void 0:n.previewStyle.map((function(e){return e.key})),style:{width:"100%"},onChange:function(e){t.setOptions({previewStyle:N.filter((function(t){var n=t.key;return e.includes(n)}))})},children:N.map((function(e){return Object(F.jsx)(re.a,{children:Object(F.jsx)(ie.a,{value:e.key,children:null===e||void 0===e?void 0:e.title})},e.key)}))}),title:"\u9884\u89c8\u6837\u5f0f\u8bbe\u7f6e",placement:"bottom",children:Object(F.jsx)(te.a,{style:{fontSize:20}})})},ce=function(e){var t=e.options,n=e.setOptions,i=e.pagesService;return Object(F.jsxs)("div",{className:X.a.operation,children:[Object(F.jsx)("div",{className:X.a.code,children:Object(F.jsx)($.a,{placement:"top",title:"\u4ee3\u7801",children:Object(F.jsx)(q.a,{style:{fontSize:20}})})}),Object(F.jsx)("div",{className:X.a.eye,children:Object(F.jsx)(ae,{pagesService:i})}),Object(F.jsxs)("div",{className:X.a.zoom,children:[Object(F.jsx)("div",{children:Object(F.jsx)($.a,{placement:"top",title:"\u7f29\u5c0f",children:Object(F.jsx)(G.a,{style:{fontSize:20,color:"".concat(1===t.zoom?"#bfbfbf":""," "),cursor:"".concat(1===t.zoom?"not-allowed":"pointer")},onClick:function(){t.zoom<=1||n(Object(m.a)(Object(m.a)({},t),{},{zoom:t.zoom-.5}))}})})}),Object(F.jsx)(ee.a,{min:1,max:3,value:t.zoom,step:.5,onChange:function(e){n(Object(m.a)(Object(m.a)({},t),{},{zoom:e}))},className:X.a.inputNumber}),Object(F.jsx)("div",{children:Object(F.jsx)($.a,{placement:"top",title:"\u653e\u5927",children:Object(F.jsx)(Q.a,{style:{fontSize:20,color:"".concat(3===t.zoom?"#bfbfbf":""," "),cursor:"".concat(3===t.zoom?"not-allowed":"pointer")},onClick:function(){t.zoom>=3||n(Object(m.a)(Object(m.a)({},t),{},{zoom:t.zoom+.5}))}})})})]}),Object(F.jsxs)("div",{className:X.a.history,children:[Object(F.jsx)("div",{onClick:function(){i.getCurrentPage().backOffHistory()},children:Object(F.jsx)($.a,{placement:"top",title:"\u540e\u9000",children:Object(F.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAahJREFUWEftlr8rhVEYxz93YZbFVZKVUYQMyMCiDIokWZCFxWYgWSykpGxK8qMsN8lmkYEyizLKP2Aw6dF5dd7T8Z7znqv3LPfUXU7f53k+9znn+Z63RORVilyfGkBoBwaA2/84vhCAOeAtFsAysAsMxgBYAzZV2wsH2AZWtTMvFOAAWDQuXGEAx8C05bZXgHf1ewEegeeQqfhrCuqBc2AsR9I74Ay4Bl5942wAjar4kG8Si24LkEvrXCZAqyre7Yx0Cx4AZx4doF0V73Dn9lZ8AE1ZarMDzcAF0Oddwi3cA8TArMt2B2TvChh15/ZWbADrNnXWW3ACTHmXyBZ+Av3AkylzPUY2E5IcYkT6ktexF+gEZIps69T2h1wAkkj83xypLCcUkElgBmgwSEaAG33PB0D0S8C+FuhjxS0KfF6Lk2NNOasvgOQYBy5VMh+ApO4KsKNBdCnr/tnKAyD6HuA+4HtgQnmM5FgADhOgvAASJ27ZFvBBkkCkfCEEQCDqgK+AERUvkHEcrqYDAXVTIfKMl2MCzAJHMQFS7Qi9A9Uew298DSB6B74BA988IbCHLaQAAAAASUVORK5CYII=",alt:""})})}),Object(F.jsx)("div",{onClick:function(){i.getCurrentPage().forwardHistory()},children:Object(F.jsx)($.a,{placement:"top",title:"\u524d\u8fdb",children:Object(F.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAllJREFUWEft1kuoT1EUx/HPjWJihCIpYmJAKZJnkiJFUoiZSBLyCnnkFSKSR0lJichjgoGURx4lJRIDQogi5VUmBh4t7VN/t/+555zrf1OyRqfO2uv33WuvtfZu8pet6S/r+2cApqZMnq6a0UZk4CI6YDhWYVcViEYA/ODXUfbDTezH+rIQjQQIzZ64hrNYUgai0QCh2QnXcReziyDaAiDTjEy8Q1agdVnaEiAEz6UCHZeXidYCDMAwDMTcVIR5GkfRFyPwrblTFYCxmIeJeI4reJUCbis462MJNiA+1vqWARiNpRiFAziMJ0XFVef/PkxOmXiZ/S8CiH5eg604iDetEK5dshmLEsSD+JEHEGd2CF+wBbf+ULh2+TLszLTrAXTBeVzG2gYK14b6hEF42hygfWqdF5jfRuK3cQEb6h3BDvTCtBzx7ohu6I+u6Jy+e5eEjY1FIW+vV4Sx+0jNpNRimU9HrMPINGYf4THe4wOixYqKOWKEeLTrnrw2XIzpGFrjEGM06uASduN1nZ1mt2FeEiI797AyddJvfrXkD1PFn0hXa9ztnxN1S+3XEkBMy6tpWh6pR5gBdMNb9EhnGucU/X+8xNnmAUzBGczAyaK7YAja4TviWTUBvwZFCasHMAd7k3i8DXIty0BUfTwmojWiCCNtZa05wAJsSuLxXGvRMoAVqTWi6CJtVawWYHl6Cc1ML6PCOBnAKdxBzIGqFgDjMRizEOIxbEpZBhCXzUZ8LbXqd6cxaWzfwELcrxKjFmB1lYWN8s0A+uBZo4JWiVM0QqvEapXvf4CfN0FuIW7I4AsAAAAASUVORK5CYII=",alt:""})})})]})]})},oe=n(113),se=n(235),le=n(231),ue=n(234),de=n(63),he=n(233),ve=n(122),fe=n.n(ve),pe=he.a.Option,ye=function(e){var t,n,i=e.value,r=e.onChange;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(he.a,{defaultValue:u[0].key,onChange:function(e){var t=u.find((function(t){return t.key===e}));null===r||void 0===r||r({key:(null===t||void 0===t?void 0:t.key)||"custom",width:(null===t||void 0===t?void 0:t.width)||(null===i||void 0===i?void 0:i.width)||"0",height:(null===t||void 0===t?void 0:t.height)||(null===i||void 0===i?void 0:i.height)||"0"})},children:Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(pe,{value:"custom",children:"\u81ea\u5b9a\u4e49"}),u.map((function(e){var t=e.key;return Object(F.jsx)(pe,{value:t,children:t},t)}))]})}),Object(F.jsxs)("div",{className:fe.a.inputNumbers,children:[Object(F.jsx)(ee.a,{min:0,value:null!==(t=null===i||void 0===i?void 0:i.width)&&void 0!==t?t:0,formatter:function(e){return"".concat(e,"px")},disabled:"custom"!==(null===i||void 0===i?void 0:i.key),parser:function(e){return(null===e||void 0===e?void 0:e.replace("px",""))||""},onChange:function(e){e&&(null===r||void 0===r||r({key:"custom",width:"".concat(String(e)),height:(null===i||void 0===i?void 0:i.height)||"0"}))}}),Object(F.jsx)("span",{className:fe.a.close,children:Object(F.jsx)(de.a,{})}),Object(F.jsx)(ee.a,{min:0,value:null!==(n=null===i||void 0===i?void 0:i.height)&&void 0!==n?n:0,formatter:function(e){return"".concat(e,"px")},disabled:"custom"!==(null===i||void 0===i?void 0:i.key),parser:function(e){return(null===e||void 0===e?void 0:e.replace("px",""))||""},onChange:function(e){e&&(null===r||void 0===r||r({key:"custom",width:(null===i||void 0===i?void 0:i.width)||"0",height:"".concat(String(e))}))}})]})]})},je=function(e){var t=e.pagesService,n=Object(i.useState)(!0),r=Object(s.a)(n,2),a=r[0],c=r[1];return Object(F.jsx)(se.a,{title:"\u65b0\u5efa\u5e03\u5c40",visible:a,onOk:function(){},onCancel:function(){return c(!1)},footer:null,children:Object(F.jsxs)(le.a,{name:"basic",labelCol:{span:0},wrapperCol:{span:16},initialValues:{name:"",canvas:u[0]},onFinish:function(e){t.cerate({name:e.name,page:{type:"div",styles:[{key:"height",value:"".concat(e.canvas.height,"px")},{key:"width",value:"".concat(e.canvas.width,"px")},{key:"background",value:"white"}],children:[]},selectStyle:w,previewStyle:N}),c(!1)},onFinishFailed:function(){},children:[Object(F.jsx)(le.a.Item,{label:"\u5e03\u5c40\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5e03\u5c40\u540d\u79f0"}],children:Object(F.jsx)(ue.a,{})}),Object(F.jsx)(le.a.Item,{label:"\u753b\u5e03\u5927\u5c0f",name:"canvas",rules:[{required:!0,validator:function(e,t){return"0"!==t.height&&"0"!==t.width?Promise.resolve():Promise.reject(new Error("\u672a\u8bbe\u7f6e\u753b\u5e03\u5927\u5c0f"))}}],children:Object(F.jsx)(ye,{})}),Object(F.jsxs)(le.a.Item,{wrapperCol:{offset:8,span:16},style:{marginBottom:0},children:[Object(F.jsx)(J.a,{htmlType:"submit",style:{marginRight:10},onClick:function(){return c(!1)},children:"\u53d6\u6d88"}),Object(F.jsx)(J.a,{type:"primary",htmlType:"submit",style:{marginLeft:10},children:"\u786e\u8ba4"})]})]})})},be=function(e){return new Promise((function(){var t=document.createElement("div");c.a.render(Object(F.jsx)(je,Object(m.a)({},e)),t)}))},ge=function(e){var t=e.pagesService,n=e.options,i=e.setOptions;return Object(F.jsxs)("div",{className:X.a.header,children:[Object(F.jsxs)("div",{className:X.a.pagesWarper,children:[Object(F.jsx)("div",{className:X.a.pages,children:Object.values(t.getPages()).map((function(e){var n=e.name,i=e.id,r={border:"1px solid ".concat(i===t.currentId?"rgb(145, 213, 255)":"")};return Object(F.jsxs)("div",{className:X.a.page,style:r,children:[Object(F.jsx)("span",{onClick:function(){return t.setPages(i)},children:n}),Object(F.jsx)(L.a,{title:"\u786e\u5b9a\u5220\u9664?",onConfirm:function(){return t.delete(i)},onCancel:function(){},okText:"\u662f",cancelText:"\u5426",children:Object(F.jsx)("div",{className:X.a.close,children:Object(F.jsx)(oe.a,{})})})]},i)}))}),Object(F.jsx)("div",{className:X.a.new,children:Object(F.jsx)(J.a,{onClick:function(){be({pagesService:t})},children:"\u65b0\u5efa"})})]}),Object(F.jsx)("div",{className:X.a.opr,children:Object(F.jsx)(ce,{options:n,setOptions:i,pagesService:t})})]})},Oe=o.a.Content,me=function(){var e=Object(i.useContext)(K).pagesService,t=Object(i.useState)({zoom:1}),n=Object(s.a)(t,2),r=n[0],a=n[1];return Object(F.jsxs)(Oe,{className:X.a.content,children:[Object(F.jsx)(ge,{pagesService:e,options:r,setOptions:a}),Object(F.jsx)(V,{pagesService:e,options:r})]})},xe=n(139),ke=n.n(xe),Ce=o.a.Header,Se=function(){return Object(F.jsx)(Ce,{className:ke.a.header})},Ae=n(123),_e=n.n(Ae),we=[{title:"Flex \u6a2a\u5411",layout:{type:"div",styles:[{key:"display",value:"flex"},{key:"height",value:"100%"},{key:"width",value:"100%"}],children:new Array(3).fill(0).map((function(e){return{type:"div",styles:[{key:"display",value:"flex"},{key:"flex",value:"1"}],children:[],extraStyles:[{key:"border",value:"1px dashed #000000"},{key:"padding",value:"5px"}]}}))}},{title:"Flex \u7eb5\u5411",layout:{type:"div",styles:[{key:"display",value:"flex"},{key:"flex-direction",value:"column"},{key:"height",value:"100%"},{key:"width",value:"100%"}],children:new Array(3).fill(0).map((function(e){return{type:"div",styles:[{key:"display",value:"flex"},{key:"flex",value:"1"}],children:[],extraStyles:[{key:"border",value:"1px dashed #000000"},{key:"padding",value:"5px"}]}}))}},{title:"\u79fb\u52a8\u7aef\u4e0a\u4e0b Padding",layout:{type:"div",styles:[{key:"padding",value:"50px 0"},{key:"height",value:"100%"},{key:"width",value:"100%"},{key:"position",value:"relative"},{key:"display",value:"flex"}],children:[{type:"div",styles:[{key:"position",value:"absolute"},{key:"height",value:"50px"},{key:"width",value:"100%"},{key:"top",value:"0"},{key:"left",value:"0"}],children:[]},{type:"div",styles:[{key:"flex",value:"1"},{key:"overflow",value:"auto"},{key:"margin",value:"10px 0"}],children:[]},{type:"div",styles:[{key:"position",value:"absolute"},{key:"height",value:"50px"},{key:"width",value:"100%"},{key:"bottom",value:"0"},{key:"left",value:"0"}],children:[]}]}},{title:"\u6eda\u52a8",layout:{type:"div",styles:[{key:"height",value:"100%"},{key:"width",value:"100%"},{key:"overflow",value:"auto"}],children:[{type:"div",styles:[{key:"height",value:"300%"},{key:"width",value:"100%"}],children:[]}]}},{title:"\u7a7a\u76d2\u5b50",layout:{type:"div",styles:[{key:"height",value:"100%"},{key:"width",value:"100%"},{key:"overflow",value:"auto"}],children:[{type:"div",styles:[{key:"height",value:"100%"},{key:"width",value:"100%"},{key:"overflow",value:"auto"}],children:[]}]}}],Ne=function(e){var t=e.layout,n=Object(i.useCallback)((function(e){e&&t.layout.element&&(e.firstChild&&e.removeChild(e.firstChild),e.appendChild(t.layout.element))}),[t.layout.element]);return Object(F.jsx)($.a,{placement:"left",title:t.title,children:Object(F.jsx)("div",{style:{height:"100%",width:"100%"},ref:n})})},Ee=function(){var e=Object(i.useContext)(K).pagesService,t=Object(i.useRef)({}),n=e.getCurrentPage(),r=Object(i.useMemo)((function(){if(n){var e;if(null===(e=t.current)||void 0===e?void 0:e[n.id])return t.current[n.id];we.forEach((function(e){var t=n.createNode(h.a.cloneDeep(e.layout)),i=n.Doc.create(t);n.DocEvent.bindLayoutEvent(t),e.layout.element=i})),t.current[n.id]=we}return we}),[n]);return Object(F.jsx)("div",{className:_e.a.container,children:r.map((function(e,t){return Object(F.jsx)("div",{className:_e.a.layoutWarper,children:Object(F.jsx)(Ne,{layout:e})},t)}))})},Pe=n(115),De=n.n(Pe),ze=n(239),Ie=n(243),He=function(e){var t=e.history,n=e.renderSpanIcon,i=e.className,r=t.id,a=t.time,c=t.description;return Object(F.jsxs)("div",{className:"".concat(De.a.history," ").concat(i),children:[Object(F.jsx)("span",{children:c}),Object(F.jsx)("span",{children:function(e){return"".concat(e.getFullYear(),"/").concat(e.getMonth()+1,"/").concat(e.getDate(),"  ").concat(e.getHours(),":").concat(v(e.getMinutes()),":").concat(v(e.getSeconds()))}(a)}),n(r)]})},Re=function(){var e=Object(i.useContext)(K).pagesService,t=Object.values(e.getPages()).filter((function(t){return t.id===e.currentId}))[0];return Object(F.jsxs)("div",{className:De.a.container,children:[null===t||void 0===t?void 0:t.history.future.slice().filter((function(e){return e})).map((function(e){return Object(F.jsx)(He,{className:De.a.futureHistory,history:e,renderSpanIcon:function(e){return Object(F.jsx)("span",{onClick:function(){t.recoveryHistory(e)},children:Object(F.jsx)($.a,{placement:"right",title:"\u8fd8\u539f\u7248\u672c",children:Object(F.jsx)(Ie.a,{})})})}},e.id)})),null===t||void 0===t?void 0:t.history.history.slice().filter((function(e){return e})).reverse().map((function(e){return Object(F.jsx)(He,{history:e,renderSpanIcon:function(e){return Object(F.jsx)("span",{onClick:function(){t.returnHistory(e)},children:Object(F.jsx)($.a,{placement:"right",title:"\u56de\u9000\u7248\u672c",children:Object(F.jsx)(ze.a,{})})})}},e.id)}))]})},Be=function(e){var t=e.test;return console.log("test",t),Object(F.jsx)(F.Fragment,{})},Fe=n(244),Te=n(245),Ke=n(246),Me=n(67),Ue=n.n(Me),We=function(e){var t=e.onChange,n=e.menus;return Object(F.jsx)("div",{className:Ue.a.menu,children:n.map((function(e){var n=e.id,i=e.icon;return Object(F.jsx)("div",{onClick:function(){return t(n)},children:i},n)}))})},Ye=o.a.Sider,Ve=function(){var e=Object(i.useMemo)((function(){return[{id:"layout",icon:Object(F.jsx)(Fe.a,{style:{fontSize:24}}),title:"\u5e38\u89c1\u5e03\u5c40",component:Object(F.jsx)(Ee,{})},{id:"history",icon:Object(F.jsx)(Te.a,{style:{fontSize:24}}),title:"\u5386\u53f2\u8bb0\u5f55",component:Object(F.jsx)(Re,{})},{id:"component",icon:Object(F.jsx)(Ke.a,{style:{fontSize:24}}),title:"\u7ec4\u4ef6",component:Object(F.jsx)(Be,{test:Object(F.jsx)(J.a,{})})}]}),[]),t=Object(i.useState)(e[0].id),n=Object(s.a)(t,2),r=n[0],a=n[1];return Object(F.jsx)(Ye,{width:400,theme:"light",children:Object(F.jsxs)("div",{className:Ue.a.slider,children:[Object(F.jsx)(We,{onChange:function(e){return a(e)},menus:e}),Object(F.jsx)("div",{className:Ue.a.body,children:e.map((function(e){var t=e.component,n=e.id,i=e.title,a=r===n;return Object(F.jsxs)("div",{className:Ue.a.card,style:{display:a?"flex":"none"},children:[Object(F.jsx)("h3",{className:Ue.a.title,children:i}),Object(F.jsx)("div",{className:Ue.a.component,children:t})]},n)}))})]})})},Ze=n(230),Xe=n(108),Le=n.n(Xe),Je=function(e){var t,n,r=e.page,a=(null===r||void 0===r||null===(t=r.currentNode[0])||void 0===t||null===(n=t.styles)||void 0===n?void 0:n.map((function(e){var t=e.key,n=e.value;return"".concat(t,": ").concat(n,";\n")})).join(""))||"",c=Object(i.useState)(a),o=Object(s.a)(c,2),l=o[0],u=o[1];Object(i.useEffect)((function(){u(a)}),[a]);return Object(F.jsx)("div",{children:Object(F.jsx)(ue.a.TextArea,{className:Le.a.input,value:l,rows:10,onChange:function(e){u(e.target.value)},onBlur:function(){return function(){if(l!==a){var e=l.replace(/\\n/,"").split(";").map((function(e){var t=e.split(":").map((function(e){return e.trim()})),n=Object(s.a)(t,2);return{key:n[0],value:n[1]}})).filter((function(e){var t=e.key,n=e.value;return t&&n}));r.setStyles(e)}}()}})})},qe=n(237),Ge=n(93),Qe=he.a.Option,$e="width",et=function(e){var t=e.style,n=void 0===t?[]:t,r=e.onChange,a=Object(i.useState)("px"),c=Object(s.a)(a,2),o=c[0],l=c[1],u=Object(i.useState)(""),d=Object(s.a)(u,2),h=d[0],v=d[1],f=Object(i.useRef)(),p=n.filter((function(e){return e.key===$e}))[0];Object(i.useEffect)((function(){var e=(null===p||void 0===p?void 0:p.value.trim().match(/^([0-9]*)(%|px|rem|em)/))||[],t=Object(s.a)(e,3),n=t[1],i=t[2];l(i||"px"),v(n||""),f.current=Object(Ge.a)({},i,n)}),[n]);return Object(F.jsx)("div",{children:Object(F.jsx)(ue.a,{addonAfter:Object(F.jsxs)(he.a,{defaultValue:"px",value:o,onChange:function(e){var t;l(e),v(["rem","custom","vw"].includes(e)?"\u6682\u4e0d\u652f\u6301":(null===(t=f.current)||void 0===t?void 0:t[e])||"")},children:[Object(F.jsx)(Qe,{value:"px",children:"px"}),Object(F.jsx)(Qe,{value:"rem",children:"rem"}),Object(F.jsx)(Qe,{value:"vw",children:"vw"}),Object(F.jsx)(Qe,{value:"%",children:"%"}),Object(F.jsx)(Qe,{value:"custom",children:"\u81ea\u5b9a\u4e49"})]}),disabled:["rem","custom","vw"].includes(o),onBlur:function(){p.value!=="".concat(h).concat(o)&&(null===r||void 0===r||r([].concat(Object(O.a)(n.filter((function(e){return e.key!==$e}))),[{key:$e,value:"".concat(h).concat(o)}])))},value:h,onChange:function(e){return v(e.target.value)}})})},tt=[{title:"\u5bbd\u5ea6",key:"width",component:function(e){return Object(F.jsx)(et,Object(m.a)({},e))}}],nt=qe.a.Panel,it=function(e){var t=e.page,n=Object(i.useState)(""),r=Object(s.a)(n,2),a=r[0],c=r[1],o=function(e){t.setStyles(e)};return Object(F.jsxs)("div",{children:[Object(F.jsx)(ue.a,{placeholder:"CSS \u5c5e\u6027\u8fc7\u6ee4",onChange:function(e){return c(e.target.value)},style:{marginBottom:10}}),Object(F.jsx)(qe.a,{defaultActiveKey:[tt[0].key],onChange:function(){},children:tt.filter((function(e){var t=e.key;return!a||new RegExp(h.a.escapeRegExp(a),"ig").test(t)})).map((function(e){var n,i=e.key,r=e.title,a=e.component;return Object(F.jsx)(nt,{header:r,children:a({style:null===t||void 0===t||null===(n=t.currentNode[0])||void 0===n?void 0:n.styles,onChange:o})},i)}))})]})},rt=Ze.a.TabPane,at=function(){var e=Object(i.useContext)(K).pagesService.getCurrentPage(),t=!!(null===e||void 0===e?void 0:e.currentNode.length);return Object(F.jsx)("div",{className:Le.a.drawer,style:{display:"".concat(t?"flex":"none")},children:Object(F.jsxs)(Ze.a,{defaultActiveKey:"1",style:{width:"100%"},children:[Object(F.jsx)(rt,{tab:"\u6837\u5f0f",children:Object(F.jsx)(it,{page:e})},"style"),Object(F.jsx)(rt,{tab:"CSS",children:Object(F.jsx)(Je,{page:e})},"css")]})})};var ct=function(){return Object(F.jsx)(M,{children:Object(F.jsxs)(o.a,{style:{height:"100vh"},children:[Object(F.jsx)(Se,{}),Object(F.jsxs)(o.a,{children:[Object(F.jsx)(Ve,{}),Object(F.jsx)(me,{}),Object(F.jsx)(at,{})]})]})})},ot=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,247)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),i(e),r(e),a(e),c(e)}))};n(222),n(223);c.a.render(Object(F.jsx)(r.a.StrictMode,{children:Object(F.jsx)(ct,{})}),document.getElementById("root")),ot()},31:function(e,t,n){e.exports={content:"Content_content__xPKcR",header:"Content_header__bjQ3t",pagesWarper:"Content_pagesWarper__2Sdy5",pages:"Content_pages__PYbAE",page:"Content_page__Jvlwt",close:"Content_close__1PY2y",new:"Content_new__XJfj9",opr:"Content_opr__35bfK",operation:"Content_operation__1Nyvf",zoom:"Content_zoom__3hBWU",inputNumber:"Content_inputNumber__1-FyC",history:"Content_history__1xtr0",code:"Content_code__2nlkR",eye:"Content_eye__8_RWq"}},67:function(e,t,n){e.exports={slider:"Sider_slider__21FJV",body:"Sider_body__2ezYg",card:"Sider_card__1KPCw",title:"Sider_title__3keBS",component:"Sider_component__1YlH0",menu:"Sider_menu__3MvPX"}},79:function(e,t,n){e.exports={container:"Body_container__1bIDN",canvas:"Body_canvas__3sLCI",body:"Body_body__3fs3G"}}},[[224,1,2]]]);
//# sourceMappingURL=main.9c2b2c2b.chunk.js.map